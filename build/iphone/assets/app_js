!function(){var e=require("ti.imagefactory"),i=Ti.UI.createWindow({backgroundColor:"#ffffff",navBarHidden:!0,exitOnClose:!0}),t=Ti.UI.createView({layout:"vertical"});i.add(t);var a=Ti.UI.createView({left:20,right:20,top:20,height:Ti.UI.SIZE,layout:"horizontal"});t.add(a);var o=Ti.UI.createButton({title:"Camera",left:0,height:50});a.add(o);var l=Ti.UI.createButton({title:"Gallery",left:20,height:50});a.add(l);var r=Ti.Platform.displayCaps.platformWidth,d=Ti.UI.createView({top:20,width:r-40,height:r-40,layout:"absolute",backgroundColor:"#ccc"});t.add(d);var c=null,h=function(){Ti.Media.openPhotoGallery({mediaTypes:[Ti.Media.MEDIA_TYPE_PHOTO],success:function(e){alert("image width: "+e.width+" height: "+e.height),n(e.media,e.width,e.height)}})},s=function(){Ti.Media.showCamera({mediaTypes:[Ti.Media.MEDIA_TYPE_PHOTO],success:function(e){alert("image width: "+e.width+" height: "+e.height),n(e.media,e.width,e.height)}})},n=function(i,t,a){var o=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"original.jpg");o.write(i),console.log(i.size),console.log(Ti.Filesystem.applicationDataDirectory),c&&(d.remove(c),c=null);var l=1,r=Ti.UI.createImageView({image:i,width:t*l,height:a*l});i=r.toBlob(),i=e.compress(i,.5);var h=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"resized.jpg");h.write(i),h=Ti.Filesystem.getFile(Ti.Filesystem.applicationDataDirectory,"resized.jpg"),console.log("lol"+h.size),c=Ti.UI.createImageView({image:i,width:i.width,height:i.height}),d.add(c)};o.addEventListener("click",s),l.addEventListener("click",h),i.open()}();